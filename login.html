<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EduGlobe | Sign In / Sign Up</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #3949ab, #5c6bc0, #7986cb);
      color: #333;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-x: hidden;
    }

    .auth-container {
      display: flex;
      width: 100%;
      max-width: 1000px;
      min-height: 600px;
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .auth-info {
      flex: 1;
      background: linear-gradient(135deg, #3949ab, #5c6bc0);
      color: white;
      padding: 60px 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .auth-info::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
      background-size: cover;
      background-position: bottom;
      opacity: 0.3;
    }

    .auth-info h1 {
      font-size: 36px;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }

    .auth-info p {
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 30px;
      position: relative;
      z-index: 1;
    }

    .auth-features {
      list-style: none;
      position: relative;
      z-index: 1;
    }

    .auth-features li {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .auth-features li i {
      margin-right: 10px;
      color: #90caf9;
    }

    .auth-form {
      flex: 1;
      padding: 60px 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .form-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-header h2 {
      font-size: 28px;
      color: #1a237e;
      margin-bottom: 10px;
    }

    .form-header p {
      color: #666;
      font-size: 16px;
    }

    .form-group {
      margin-bottom: 20px;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #333;
    }

    .input-group {
      position: relative;
    }

    .input-group i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
      transition: color 0.3s ease;
    }

    .form-control {
      width: 100%;
      padding: 12px 15px 12px 45px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s ease;
      outline: none;
    }

    .form-control:focus {
      border-color: #3949ab;
      box-shadow: 0 0 0 3px rgba(57, 73, 171, 0.1);
    }

    .form-control:focus + i {
      color: #3949ab;
    }

    .password-toggle {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .password-toggle:hover {
      color: #3949ab;
    }

    .password-strength {
      height: 5px;
      border-radius: 3px;
      margin-top: 8px;
      background: #e0e0e0;
      overflow: hidden;
    }

    .password-strength-meter {
      height: 100%;
      width: 0;
      transition: width 0.3s ease, background-color 0.3s ease;
    }

    .form-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .remember-me {
      display: flex;
      align-items: center;
    }

    .remember-me input {
      margin-right: 8px;
    }

    .forgot-password {
      color: #3949ab;
      text-decoration: none;
      font-size: 14px;
      transition: color 0.3s ease;
    }

    .forgot-password:hover {
      color: #303f9f;
      text-decoration: underline;
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .btn-primary {
      background: linear-gradient(135deg, #3949ab, #5c6bc0);
      color: white;
      width: 100%;
      margin-bottom: 20px;
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #303f9f, #3949ab);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(57, 73, 171, 0.3);
    }

    .divider {
      display: flex;
      align-items: center;
      margin: 20px 0;
    }

    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: #e0e0e0;
    }

    .divider span {
      padding: 0 15px;
      color: #999;
      font-size: 14px;
    }

    .social-login {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .social-btn {
      flex: 1;
      padding: 10px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .social-btn:hover {
      background: #f5f7ff;
      border-color: #3949ab;
    }

    .social-btn i {
      font-size: 18px;
    }

    .google-btn i {
      color: #ea4335;
    }

    .facebook-btn i {
      color: #1877f2;
    }

    .twitter-btn i {
      color: #1da1f2;
    }

    .terms {
      font-size: 14px;
      color: #666;
      text-align: center;
      margin-bottom: 20px;
    }

    .terms a {
      color: #3949ab;
      text-decoration: none;
    }

    .terms a:hover {
      text-decoration: underline;
    }

    .toggle-auth {
      text-align: center;
      font-size: 16px;
      color: #666;
    }

    .toggle-auth a {
      color: #3949ab;
      text-decoration: none;
      font-weight: 600;
    }

    .toggle-auth a:hover {
      text-decoration: underline;
    }

    .error-message {
      color: #f44336;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }

    .success-message {
      color: #4caf50;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }

    .loading {
      display: none;
      text-align: center;
      margin-top: 10px;
    }

    .loading i {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Improved Password Reset Modal */
    .reset-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .reset-modal-content {
      background-color: white;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      animation: slideIn 0.3s ease;
    }

    .reset-modal-header {
      background: linear-gradient(135deg, #3949ab, #5c6bc0);
      color: white;
      padding: 25px 30px;
      position: relative;
    }

    .reset-modal-header h3 {
      font-size: 24px;
      margin: 0;
      display: flex;
      align-items: center;
    }

    .reset-modal-header h3 i {
      margin-right: 15px;
      font-size: 28px;
    }

    .close-modal {
      position: absolute;
      top: 25px;
      right: 25px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      color: white;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .close-modal:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .reset-modal-body {
      padding: 30px;
    }

    .reset-progress {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      position: relative;
    }

    .reset-progress::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 40px;
      right: 40px;
      height: 2px;
      background: #e0e0e0;
      z-index: 1;
    }

    .reset-progress-line {
      position: absolute;
      top: 20px;
      left: 40px;
      height: 2px;
      background: #3949ab;
      z-index: 2;
      transition: width 0.5s ease;
    }

    .reset-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 3;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #e0e0e0;
      color: #999;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 10px;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .step.active .step-circle {
      background-color: #3949ab;
      color: white;
      box-shadow: 0 0 0 4px rgba(57, 73, 171, 0.2);
    }

    .step.completed .step-circle {
      background-color: #4caf50;
      color: white;
    }

    .step-label {
      text-align: center;
      font-size: 14px;
      color: #666;
      max-width: 100px;
    }

    .step.active .step-label {
      color: #3949ab;
      font-weight: 600;
    }

    .step.completed .step-label {
      color: #4caf50;
      font-weight: 600;
    }

    .reset-form-content {
      margin-bottom: 20px;
    }

    .reset-form-content p {
      margin-bottom: 20px;
      color: #666;
      font-size: 16px;
      line-height: 1.5;
    }

    .code-input-group {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      gap: 10px;
    }

    .code-input {
      width: 50px;
      height: 60px;
      text-align: center;
      font-size: 24px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .code-input:focus {
      border-color: #3949ab;
      outline: none;
      box-shadow: 0 0 0 3px rgba(57, 73, 171, 0.1);
    }

    .code-input.filled {
      border-color: #4caf50;
      background-color: rgba(76, 175, 80, 0.05);
    }

    .resend-text {
      text-align: center;
      margin-top: 15px;
      font-size: 14px;
      color: #666;
    }

    .resend-text a {
      color: #3949ab;
      text-decoration: none;
      font-weight: 600;
    }

    .resend-text a:hover {
      text-decoration: underline;
    }

    .reset-timer {
      display: none;
      background: #f5f7ff;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      text-align: center;
    }

    .reset-timer i {
      color: #3949ab;
      margin-right: 10px;
    }

    .reset-timer span {
      font-weight: 600;
      color: #3949ab;
    }

    .notification {
      display: none;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      align-items: center;
    }

    .notification.success {
      background-color: rgba(76, 175, 80, 0.1);
      border-left: 4px solid #4caf50;
      color: #2e7d32;
    }

    .notification.error {
      background-color: rgba(244, 67, 54, 0.1);
      border-left: 4px solid #f44336;
      color: #c62828;
    }

    .notification i {
      margin-right: 10px;
      font-size: 18px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .auth-container {
        flex-direction: column;
        max-width: 400px;
      }

      .auth-info {
        padding: 40px 30px;
      }

      .auth-info h1 {
        font-size: 28px;
      }

      .auth-info p {
        font-size: 16px;
      }

      .auth-form {
        padding: 40px 30px;
      }

      .social-login {
        flex-direction: column;
      }
      
      .reset-modal-content {
        width: 95%;
      }
      
      .reset-modal-header {
        padding: 20px;
      }
      
      .reset-modal-header h3 {
        font-size: 20px;
      }
      
      .reset-modal-body {
        padding: 20px;
      }
      
      .code-input {
        width: 45px;
        height: 50px;
        font-size: 20px;
      }
    }
  </style>
</head>
<body>

  <div class="auth-container">
    <div class="auth-info">
      <h1>Welcome to EduGlobe</h1>
      <p>Your one-stop platform to learn, explore, and grow in Math and Programming.</p>
      <ul class="auth-features">
        <li><i class="fas fa-check-circle"></i> Comprehensive learning resources</li>
        <li><i class="fas fa-check-circle"></i> Interactive quizzes and tools</li>
        <li><i class="fas fa-check-circle"></i> Track your progress</li>
        <li><i class="fas fa-check-circle"></i> Learn at your own pace</li>
      </ul>
    </div>

    <div class="auth-form">
      <div class="form-header">
        <h2 id="formTitle">Sign In</h2>
        <p id="formSubtitle">Welcome back! Please enter your details.</p>
      </div>

      <form id="authForm">
        <div id="nameGroup" class="form-group" style="display: none;">
          <label for="name">Full Name</label>
          <div class="input-group">
            <input type="text" id="name" class="form-control" placeholder="Enter your full name">
            <i class="fas fa-user"></i>
          </div>
          <div class="error-message" id="nameError"></div>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-group">
            <input type="email" id="email" class="form-control" placeholder="Enter your email">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="error-message" id="emailError"></div>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-group">
            <input type="password" id="password" class="form-control" placeholder="Enter your password">
            <i class="fas fa-lock"></i>
            <span class="password-toggle" onclick="togglePassword()">
              <i class="fas fa-eye" id="passwordIcon"></i>
            </span>
          </div>
          <div class="password-strength" id="passwordStrength" style="display: none;">
            <div class="password-strength-meter" id="passwordStrengthMeter"></div>
          </div>
          <div class="error-message" id="passwordError"></div>
        </div>

        <div id="confirmPasswordGroup" class="form-group" style="display: none;">
          <label for="confirmPassword">Confirm Password</label>
          <div class="input-group">
            <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your password">
            <i class="fas fa-lock"></i>
            <span class="password-toggle" onclick="toggleConfirmPassword()">
              <i class="fas fa-eye" id="confirmPasswordIcon"></i>
            </span>
          </div>
          <div class="error-message" id="confirmPasswordError"></div>
        </div>

        <div class="form-options">
          <div class="remember-me">
            <input type="checkbox" id="rememberMe">
            <label for="rememberMe">Remember me</label>
          </div>
          <a href="#" class="forgot-password" id="forgotPassword">Forgot password?</a>
        </div>

        <button type="submit" class="btn btn-primary" id="authButton">Sign In</button>
        <div class="loading" id="loading">
          <i class="fas fa-spinner"></i> Processing...
        </div>
        <div class="success-message" id="successMessage"></div>

        <div class="divider">
          <span>OR</span>
        </div>

        <div class="social-login">
          <div class="social-btn google-btn" id="googleLogin">
            <i class="fab fa-google"></i>
            <span>Google</span>
          </div>
          <div class="social-btn facebook-btn" id="facebookLogin">
            <i class="fab fa-facebook-f"></i>
            <span>Facebook</span>
          </div>
          <div class="social-btn twitter-btn" id="twitterLogin">
            <i class="fab fa-twitter"></i>
            <span>Twitter</span>
          </div>
        </div>

        <div id="termsGroup" class="terms" style="display: none;">
          <input type="checkbox" id="terms"> I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
        </div>
      </form>

      <div class="toggle-auth">
        <span id="toggleText">Don't have an account?</span> <a href="#" id="toggleLink">Sign Up</a>
      </div>
    </div>
  </div>

  <!-- Improved Password Reset Modal -->
  <div class="reset-modal" id="resetModal">
    <div class="reset-modal-content">
      <div class="reset-modal-header">
        <h3><i class="fas fa-key"></i> Reset Password</h3>
        <button class="close-modal" id="closeModal">&times;</button>
      </div>
      
      <div class="reset-modal-body">
        <div class="reset-progress">
          <div class="reset-progress-line" id="progressLine" style="width: 0%;"></div>
          <div class="reset-step active" id="step1">
            <div class="step-circle">1</div>
            <div class="step-label">Enter Email</div>
          </div>
          <div class="reset-step" id="step2">
            <div class="step-circle">2</div>
            <div class="step-label">Verify Code</div>
          </div>
          <div class="reset-step" id="step3">
            <div class="step-circle">3</div>
            <div class="step-label">New Password</div>
          </div>
        </div>
        
        <div class="notification success" id="successNotification">
          <i class="fas fa-check-circle"></i>
          <span id="successMessageText">Success message</span>
        </div>
        
        <div class="notification error" id="errorNotification">
          <i class="fas fa-exclamation-circle"></i>
          <span id="errorMessageText">Error message</span>
        </div>
        
        <div class="reset-form-content" id="resetStep1">
          <p>Enter your email address and we'll send you a verification code to reset your password.</p>
          <div class="form-group">
            <label for="resetEmail">Email</label>
            <div class="input-group">
              <input type="email" id="resetEmail" class="form-control" placeholder="Enter your email">
              <i class="fas fa-envelope"></i>
            </div>
            <div class="error-message" id="resetEmailError"></div>
          </div>
          <button type="button" class="btn btn-primary" id="sendCodeBtn">Send Code</button>
        </div>
        
        <div class="reset-form-content" id="resetStep2" style="display: none;">
          <p>We've sent a verification code to your email. Please enter the code below.</p>
          <div class="code-input-group">
            <input type="text" class="code-input" maxlength="1" id="code1">
            <input type="text" class="code-input" maxlength="1" id="code2">
            <input type="text" class="code-input" maxlength="1" id="code3">
            <input type="text" class="code-input" maxlength="1" id="code4">
            <input type="text" class="code-input" maxlength="1" id="code5">
            <input type="text" class="code-input" maxlength="1" id="code6">
          </div>
          <div class="error-message" id="codeError"></div>
          <button type="button" class="btn btn-primary" id="verifyCodeBtn">Verify Code</button>
          <div class="resend-text">
            Didn't receive the code? <a href="#" id="resendCodeBtn">Resend</a>
          </div>
          <div class="reset-timer" id="resetTimer">
            <i class="fas fa-clock"></i> You can request a new code in <span id="timerCount">60</span> seconds
          </div>
        </div>
        
        <div class="reset-form-content" id="resetStep3" style="display: none;">
          <p>Enter your new password below.</p>
          <div class="form-group">
            <label for="newPassword">New Password</label>
            <div class="input-group">
              <input type="password" id="newPassword" class="form-control" placeholder="Enter new password">
              <i class="fas fa-lock"></i>
              <span class="password-toggle" onclick="toggleNewPassword()">
                <i class="fas fa-eye" id="newPasswordIcon"></i>
              </span>
            </div>
            <div class="password-strength">
              <div class="password-strength-meter" id="newPasswordStrengthMeter"></div>
            </div>
            <div class="error-message" id="newPasswordError"></div>
          </div>
          <div class="form-group">
            <label for="confirmNewPassword">Confirm New Password</label>
            <div class="input-group">
              <input type="password" id="confirmNewPassword" class="form-control" placeholder="Confirm new password">
              <i class="fas fa-lock"></i>
              <span class="password-toggle" onclick="toggleConfirmNewPassword()">
                <i class="fas fa-eye" id="confirmNewPasswordIcon"></i>
              </span>
            </div>
            <div class="error-message" id="confirmNewPasswordError"></div>
          </div>
          <button type="button" class="btn btn-primary" id="resetPasswordBtn">Reset Password</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Check if already logged in
    if (localStorage.getItem("loggedIn") === "true") {
      window.location.href = "index.html";
    }

    // DOM Elements
    const formTitle = document.getElementById("formTitle");
    const formSubtitle = document.getElementById("formSubtitle");
    const nameGroup = document.getElementById("nameGroup");
    const confirmPasswordGroup = document.getElementById("confirmPasswordGroup");
    const termsGroup = document.getElementById("termsGroup");
    const authButton = document.getElementById("authButton");
    const toggleText = document.getElementById("toggleText");
    const toggleLink = document.getElementById("toggleLink");
    const forgotPassword = document.getElementById("forgotPassword");
    const passwordStrength = document.getElementById("passwordStrength");
    const passwordStrengthMeter = document.getElementById("passwordStrengthMeter");
    const loading = document.getElementById("loading");
    const successMessage = document.getElementById("successMessage");
    
    // Form elements
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const confirmPasswordInput = document.getElementById("confirmPassword");
    const rememberMeInput = document.getElementById("rememberMe");
    const termsInput = document.getElementById("terms");
    
    // Error elements
    const nameError = document.getElementById("nameError");
    const emailError = document.getElementById("emailError");
    const passwordError = document.getElementById("passwordError");
    const confirmPasswordError = document.getElementById("confirmPasswordError");
    
    // Password reset modal elements
    const resetModal = document.getElementById("resetModal");
    const closeModal = document.getElementById("closeModal");
    const resetEmail = document.getElementById("resetEmail");
    const resetEmailError = document.getElementById("resetEmailError");
    const sendCodeBtn = document.getElementById("sendCodeBtn");
    const verifyCodeBtn = document.getElementById("verifyCodeBtn");
    const resendCodeBtn = document.getElementById("resendCodeBtn");
    const resetPasswordBtn = document.getElementById("resetPasswordBtn");
    const codeError = document.getElementById("codeError");
    const newPassword = document.getElementById("newPassword");
    const newPasswordError = document.getElementById("newPasswordError");
    const confirmNewPassword = document.getElementById("confirmNewPassword");
    const confirmNewPasswordError = document.getElementById("confirmNewPasswordError");
    const progressLine = document.getElementById("progressLine");
    const successNotification = document.getElementById("successNotification");
    const errorNotification = document.getElementById("errorNotification");
    const successMessageText = document.getElementById("successMessageText");
    const errorMessageText = document.getElementById("errorMessageText");
    const resetTimer = document.getElementById("resetTimer");
    const timerCount = document.getElementById("timerCount");
    
    // State
    let isSignUp = false;
    let resetStep = 1;
    let generatedCode = "";
    let resetEmailValue = "";
    let resendTimer = null;
    let timerSeconds = 60;

    // Toggle between sign in and sign up
    function toggleAuthMode() {
      isSignUp = !isSignUp;
      
      if (isSignUp) {
        formTitle.textContent = "Sign Up";
        formSubtitle.textContent = "Create an account to get started.";
        authButton.textContent = "Sign Up";
        toggleText.textContent = "Already have an account?";
        toggleLink.textContent = "Sign In";
        forgotPassword.style.display = "none";
        nameGroup.style.display = "block";
        confirmPasswordGroup.style.display = "block";
        termsGroup.style.display = "block";
        passwordStrength.style.display = "block";
      } else {
        formTitle.textContent = "Sign In";
        formSubtitle.textContent = "Welcome back! Please enter your details.";
        authButton.textContent = "Sign In";
        toggleText.textContent = "Don't have an account?";
        toggleLink.textContent = "Sign Up";
        forgotPassword.style.display = "block";
        nameGroup.style.display = "none";
        confirmPasswordGroup.style.display = "none";
        termsGroup.style.display = "none";
        passwordStrength.style.display = "none";
      }
      
      // Clear form and errors
      clearForm();
      clearErrors();
    }

    // Toggle password visibility
    function togglePassword() {
      const passwordIcon = document.getElementById("passwordIcon");
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        passwordIcon.classList.remove("fa-eye");
        passwordIcon.classList.add("fa-eye-slash");
      } else {
        passwordInput.type = "password";
        passwordIcon.classList.remove("fa-eye-slash");
        passwordIcon.classList.add("fa-eye");
      }
    }

    // Toggle confirm password visibility
    function toggleConfirmPassword() {
      const confirmPasswordIcon = document.getElementById("confirmPasswordIcon");
      if (confirmPasswordInput.type === "password") {
        confirmPasswordInput.type = "text";
        confirmPasswordIcon.classList.remove("fa-eye");
        confirmPasswordIcon.classList.add("fa-eye-slash");
      } else {
        confirmPasswordInput.type = "password";
        confirmPasswordIcon.classList.remove("fa-eye-slash");
        confirmPasswordIcon.classList.add("fa-eye");
      }
    }

    // Toggle new password visibility
    function toggleNewPassword() {
      const newPasswordIcon = document.getElementById("newPasswordIcon");
      if (newPassword.type === "password") {
        newPassword.type = "text";
        newPasswordIcon.classList.remove("fa-eye");
        newPasswordIcon.classList.add("fa-eye-slash");
      } else {
        newPassword.type = "password";
        newPasswordIcon.classList.remove("fa-eye-slash");
        newPasswordIcon.classList.add("fa-eye");
      }
    }

    // Toggle confirm new password visibility
    function toggleConfirmNewPassword() {
      const confirmNewPasswordIcon = document.getElementById("confirmNewPasswordIcon");
      if (confirmNewPassword.type === "password") {
        confirmNewPassword.type = "text";
        confirmNewPasswordIcon.classList.remove("fa-eye");
        confirmNewPasswordIcon.classList.add("fa-eye-slash");
      } else {
        confirmNewPassword.type = "password";
        confirmNewPasswordIcon.classList.remove("fa-eye-slash");
        confirmNewPasswordIcon.classList.add("fa-eye");
      }
    }

    // Check password strength
    function checkPasswordStrength(password) {
      let strength = 0;
      
      // Length check
      if (password.length >= 8) strength += 25;
      
      // Contains lowercase
      if (password.match(/[a-z]+/)) strength += 25;
      
      // Contains uppercase
      if (password.match(/[A-Z]+/)) strength += 25;
      
      // Contains numbers
      if (password.match(/[0-9]+/)) strength += 25;
      
      return strength;
    }

    // Update password strength meter
    function updatePasswordStrength() {
      if (!isSignUp) return;
      
      const password = passwordInput.value;
      const strength = checkPasswordStrength(password);
      
      passwordStrengthMeter.style.width = strength + "%";
      
      if (strength <= 25) {
        passwordStrengthMeter.style.backgroundColor = "#f44336";
      } else if (strength <= 50) {
        passwordStrengthMeter.style.backgroundColor = "#ff9800";
      } else if (strength <= 75) {
        passwordStrengthMeter.style.backgroundColor = "#ffeb3b";
      } else {
        passwordStrengthMeter.style.backgroundColor = "#4caf50";
      }
    }

    // Update new password strength meter
    function updateNewPasswordStrength() {
      const password = newPassword.value;
      const strength = checkPasswordStrength(password);
      const newPasswordStrengthMeter = document.getElementById("newPasswordStrengthMeter");
      
      newPasswordStrengthMeter.style.width = strength + "%";
      
      if (strength <= 25) {
        newPasswordStrengthMeter.style.backgroundColor = "#f44336";
      } else if (strength <= 50) {
        newPasswordStrengthMeter.style.backgroundColor = "#ff9800";
      } else if (strength <= 75) {
        newPasswordStrengthMeter.style.backgroundColor = "#ffeb3b";
      } else {
        newPasswordStrengthMeter.style.backgroundColor = "#4caf50";
      }
    }

    // Validate email
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    // Clear form
    function clearForm() {
      nameInput.value = "";
      emailInput.value = "";
      passwordInput.value = "";
      confirmPasswordInput.value = "";
      rememberMeInput.checked = false;
      termsInput.checked = false;
    }

    // Clear errors
    function clearErrors() {
      nameError.textContent = "";
      nameError.style.display = "none";
      emailError.textContent = "";
      emailError.style.display = "none";
      passwordError.textContent = "";
      passwordError.style.display = "none";
      confirmPasswordError.textContent = "";
      confirmPasswordError.style.display = "none";
      successMessage.textContent = "";
      successMessage.style.display = "none";
      
      // Reset modal errors
      resetEmailError.textContent = "";
      resetEmailError.style.display = "none";
      codeError.textContent = "";
      codeError.style.display = "none";
      newPasswordError.textContent = "";
      newPasswordError.style.display = "none";
      confirmNewPasswordError.textContent = "";
      confirmNewPasswordError.style.display = "none";
      
      // Hide notifications
      successNotification.style.display = "none";
      errorNotification.style.display = "none";
    }

    // Show error
    function showError(element, message) {
      element.textContent = message;
      element.style.display = "block";
    }

    // Show success message
    function showSuccess(message) {
      successMessage.textContent = message;
      successMessage.style.display = "block";
    }

    // Show notification
    function showNotification(type, message) {
      if (type === "success") {
        successNotification.style.display = "flex";
        errorNotification.style.display = "none";
        successMessageText.textContent = message;
      } else {
        errorNotification.style.display = "flex";
        successNotification.style.display = "none";
        errorMessageText.textContent = message;
      }
      
      // Auto hide after 5 seconds
      setTimeout(() => {
        successNotification.style.display = "none";
        errorNotification.style.display = "none";
      }, 5000);
    }

    // Handle form submission
    document.getElementById("authForm").addEventListener("submit", function(e) {
      e.preventDefault();
      clearErrors();
      
      let isValid = true;
      
      // Validate name (for sign up)
      if (isSignUp && nameInput.value.trim() === "") {
        showError(nameError, "Please enter your full name");
        isValid = false;
      }
      
      // Validate email
      if (!validateEmail(emailInput.value)) {
        showError(emailError, "Please enter a valid email address");
        isValid = false;
      }
      
      // Validate password
      if (passwordInput.value.length < 6) {
        showError(passwordError, "Password must be at least 6 characters");
        isValid = false;
      }
      
      // Validate confirm password (for sign up)
      if (isSignUp && passwordInput.value !== confirmPasswordInput.value) {
        showError(confirmPasswordError, "Passwords do not match");
        isValid = false;
      }
      
      // Validate terms (for sign up)
      if (isSignUp && !termsInput.checked) {
        alert("Please agree to the Terms of Service and Privacy Policy");
        isValid = false;
      }
      
      if (!isValid) return;
      
      // Show loading
      loading.style.display = "block";
      authButton.disabled = true;
      
      // Simulate API call
      setTimeout(() => {
        loading.style.display = "none";
        authButton.disabled = false;
        
        if (isSignUp) {
          // Sign up logic
          localStorage.setItem("user", emailInput.value);
          localStorage.setItem("pass", passwordInput.value);
          localStorage.setItem("name", nameInput.value);
          
          showSuccess("Account created successfully! Please sign in.");
          setTimeout(() => {
            toggleAuthMode();
          }, 2000);
        } else {
          // Sign in logic
          const storedUser = localStorage.getItem("user");
          const storedPass = localStorage.getItem("pass");
          
          if (emailInput.value === storedUser && passwordInput.value === storedPass) {
            localStorage.setItem("loggedIn", "true");
            
            if (rememberMeInput.checked) {
              localStorage.setItem("rememberMe", "true");
            } else {
              localStorage.removeItem("rememberMe");
            }
            
            showSuccess("Login successful! Redirecting...");
            setTimeout(() => {
              window.location.href = "index.html";
            }, 1500);
          } else {
            showError(passwordError, "Incorrect email or password");
          }
        }
      }, 1500);
    });

    // Handle forgot password
    forgotPassword.addEventListener("click", function(e) {
      e.preventDefault();
      resetModal.style.display = "flex";
      resetStep = 1;
      showResetStep(1);
    });

    // Close reset modal
    closeModal.addEventListener("click", function() {
      resetModal.style.display = "none";
      // Clear any running timer
      if (resendTimer) {
        clearInterval(resendTimer);
        resendTimer = null;
      }
    });

    // Show reset step
    function showResetStep(step) {
      // Hide all steps
      document.getElementById("resetStep1").style.display = "none";
      document.getElementById("resetStep2").style.display = "none";
      document.getElementById("resetStep3").style.display = "none";
      
      // Remove active class from all steps
      document.getElementById("step1").classList.remove("active", "completed");
      document.getElementById("step2").classList.remove("active", "completed");
      document.getElementById("step3").classList.remove("active", "completed");
      
      // Show current step and mark previous steps as completed
      for (let i = 1; i <= step; i++) {
        document.getElementById(`resetStep${i}`).style.display = "block";
        
        if (i < step) {
          document.getElementById(`step${i}`).classList.add("completed");
        } else {
          document.getElementById(`step${i}`).classList.add("active");
        }
      }
      
      // Update progress line
      const progressPercentage = ((step - 1) / 2) * 100;
      progressLine.style.width = `${progressPercentage}%`;
      
      resetStep = step;
    }

    // Start resend timer
    function startResendTimer() {
      timerSeconds = 60;
      resetTimer.style.display = "block";
      timerCount.textContent = timerSeconds;
      
      resendTimer = setInterval(() => {
        timerSeconds--;
        timerCount.textContent = timerSeconds;
        
        if (timerSeconds <= 0) {
          clearInterval(resendTimer);
          resendTimer = null;
          resetTimer.style.display = "none";
        }
      }, 1000);
    }

    // Send code
    sendCodeBtn.addEventListener("click", function() {
      const email = resetEmail.value.trim();
      
      if (!validateEmail(email)) {
        showError(resetEmailError, "Please enter a valid email address");
        return;
      }
      
      // Check if email exists in localStorage
      const storedUser = localStorage.getItem("user");
      if (email !== storedUser) {
        showError(resetEmailError, "Email not found in our records");
        return;
      }
      
      // Generate 6-digit code
      generatedCode = Math.floor(100000 + Math.random() * 900000).toString();
      resetEmailValue = email;
      
      // Store code in localStorage (in a real app, this would be sent via email)
      localStorage.setItem("resetCode", generatedCode);
      localStorage.setItem("resetEmail", email);
      
      // Show success notification
      showNotification("success", `A verification code has been sent to ${email}. For demo purposes, the code is: ${generatedCode}`);
      
      // Move to step 2
      showResetStep(2);
      
      // Start timer for resend
      startResendTimer();
      
      // Auto-focus first code input
      setTimeout(() => {
        document.getElementById("code1").focus();
      }, 500);
    });

    // Handle code input
    document.querySelectorAll(".code-input").forEach((input, index) => {
      input.addEventListener("input", function() {
        // Add filled class when input has value
        if (this.value.length === 1) {
          this.classList.add("filled");
        } else {
          this.classList.remove("filled");
        }
        
        // Move to next input
        if (this.value.length === 1) {
          if (index < 5) {
            document.getElementById(`code${index + 2}`).focus();
          }
        }
      });
      
      input.addEventListener("keydown", function(e) {
        // Handle backspace
        if (e.key === "Backspace" && this.value === "") {
          if (index > 0) {
            document.getElementById(`code${index}`).focus();
          }
        }
      });
    });

    // Verify code
    verifyCodeBtn.addEventListener("click", function() {
      const enteredCode = 
        document.getElementById("code1").value +
        document.getElementById("code2").value +
        document.getElementById("code3").value +
        document.getElementById("code4").value +
        document.getElementById("code5").value +
        document.getElementById("code6").value;
      
      const storedCode = localStorage.getItem("resetCode");
      
      if (enteredCode !== storedCode) {
        showNotification("error", "Invalid verification code. Please try again.");
        return;
      }
      
      // Move to step 3
      showResetStep(3);
      
      // Auto-focus new password input
      setTimeout(() => {
        newPassword.focus();
      }, 500);
    });

    // Resend code
    resendCodeBtn.addEventListener("click", function(e) {
      e.preventDefault();
      
      // Check if timer is running
      if (resendTimer) {
        return;
      }
      
      // Generate new code
      generatedCode = Math.floor(100000 + Math.random() * 900000).toString();
      
      // Update stored code
      localStorage.setItem("resetCode", generatedCode);
      
      // Show success notification
      showNotification("success", `A new verification code has been sent to ${resetEmailValue}. For demo purposes, the code is: ${generatedCode}`);
      
      // Start timer again
      startResendTimer();
    });

    // Reset password
    resetPasswordBtn.addEventListener("click", function() {
      const newPass = newPassword.value;
      const confirmNewPass = confirmNewPassword.value;
      
      if (newPass.length < 6) {
        showError(newPasswordError, "Password must be at least 6 characters");
        return;
      }
      
      if (newPass !== confirmNewPass) {
        showError(confirmNewPasswordError, "Passwords do not match");
        return;
      }
      
      // Update password in localStorage
      localStorage.setItem("pass", newPass);
      
      // Clear reset data
      localStorage.removeItem("resetCode");
      localStorage.removeItem("resetEmail");
      
      // Show success notification
      showNotification("success", "Your password has been reset successfully!");
      
      // Close modal after delay
      setTimeout(() => {
        resetModal.style.display = "none";
      }, 2000);
      
      // Reset form
      document.getElementById("resetStep1").style.display = "block";
      document.getElementById("resetStep2").style.display = "none";
      document.getElementById("resetStep3").style.display = "none";
      
      // Clear inputs
      resetEmail.value = "";
      newPassword.value = "";
      confirmNewPassword.value = "";
      
      // Clear code inputs
      document.querySelectorAll(".code-input").forEach(input => {
        input.value = "";
        input.classList.remove("filled");
      });
    });

    // Handle social login
    document.getElementById("googleLogin").addEventListener("click", function() {
      // Show loading
      loading.style.display = "block";
      
      // Simulate social login
      setTimeout(() => {
        loading.style.display = "none";
        
        // Create a user with Google data
        const googleUser = {
          email: "user@gmail.com",
          name: "Google User",
          provider: "google"
        };
        
        // Store user data
        localStorage.setItem("user", googleUser.email);
        localStorage.setItem("name", googleUser.name);
        localStorage.setItem("provider", googleUser.provider);
        localStorage.setItem("loggedIn", "true");
        
        showSuccess("Login successful with Google! Redirecting...");
        
        setTimeout(() => {
          window.location.href = "index.html";
        }, 1500);
      }, 1500);
    });

    document.getElementById("facebookLogin").addEventListener("click", function() {
      // Show loading
      loading.style.display = "block";
      
      // Simulate social login
      setTimeout(() => {
        loading.style.display = "none";
        
        // Create a user with Facebook data
        const facebookUser = {
          email: "user@facebook.com",
          name: "Facebook User",
          provider: "facebook"
        };
        
        // Store user data
        localStorage.setItem("user", facebookUser.email);
        localStorage.setItem("name", facebookUser.name);
        localStorage.setItem("provider", facebookUser.provider);
        localStorage.setItem("loggedIn", "true");
        
        showSuccess("Login successful with Facebook! Redirecting...");
        
        setTimeout(() => {
          window.location.href = "index.html";
        }, 1500);
      }, 1500);
    });

    document.getElementById("twitterLogin").addEventListener("click", function() {
      // Show loading
      loading.style.display = "block";
      
      // Simulate social login
      setTimeout(() => {
        loading.style.display = "none";
        
        // Create a user with Twitter data
        const twitterUser = {
          email: "user@twitter.com",
          name: "Twitter User",
          provider: "twitter"
        };
        
        // Store user data
        localStorage.setItem("user", twitterUser.email);
        localStorage.setItem("name", twitterUser.name);
        localStorage.setItem("provider", twitterUser.provider);
        localStorage.setItem("loggedIn", "true");
        
        showSuccess("Login successful with Twitter! Redirecting...");
        
        setTimeout(() => {
          window.location.href = "index.html";
        }, 1500);
      }, 1500);
    });

    // Event listeners
    document.getElementById("toggleLink").addEventListener("click", function(e) {
      e.preventDefault();
      toggleAuthMode();
    });

    passwordInput.addEventListener("input", updatePasswordStrength);
    newPassword.addEventListener("input", updateNewPasswordStrength);

    // Check for remembered user
    if (localStorage.getItem("rememberMe") === "true") {
      emailInput.value = localStorage.getItem("user") || "";
      rememberMeInput.checked = true;
    }
  </script>

</body>
</html>